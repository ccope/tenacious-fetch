{"version":3,"file":"main.js","sources":["../node_modules/node-fetch/lib/index.mjs","../node_modules/isomorphic-fetch/fetch-npm-node.js","../src/retrying-fetch.js","../node_modules/abortcontroller-polyfill/dist/abortcontroller-polyfill-only.js","../src/index.js"],"sourcesContent":["import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n// (MIT licensed)\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (typeof body === 'string') ; else if (isURLSearchParams(body)) ; else if (body instanceof Blob) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') ; else if (ArrayBuffer.isView(body)) ; else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string\n\t\tbody = String(body);\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\t// body is null\n\tif (this.body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is string\n\tif (typeof this.body === 'string') {\n\t\treturn Body.Promise.resolve(Buffer.from(this.body));\n\t}\n\n\t// body is blob\n\tif (this.body instanceof Blob) {\n\t\treturn Body.Promise.resolve(this.body[BUFFER]);\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(this.body)) {\n\t\treturn Body.Promise.resolve(this.body);\n\t}\n\n\t// body is ArrayBuffer\n\tif (Object.prototype.toString.call(this.body) === '[object ArrayBuffer]') {\n\t\treturn Body.Promise.resolve(Buffer.from(this.body));\n\t}\n\n\t// body is ArrayBufferView\n\tif (ArrayBuffer.isView(this.body)) {\n\t\treturn Body.Promise.resolve(Buffer.from(this.body.buffer, this.body.byteOffset, this.body.byteLength));\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(this.body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\t_this4.body.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\t_this4.body.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\t_this4.body.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Response or Request instance\n */\nfunction extractContentType(instance) {\n\tconst body = instance.body;\n\n\t// istanbul ignore if: Currently, because of a guard in Request, body\n\t// can never be null. Included here for completeness.\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\t// istanbul ignore if: included for completion\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn Buffer.byteLength(body);\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is URLSearchParams\n\t\treturn Buffer.byteLength(String(body));\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn body.byteLength;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn body.byteLength;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is URLSearchParams\n\t\tdest.write(Buffer.from(String(body)));\n\t\tdest.end();\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t\tdest.write(body[BUFFER]);\n\t\tdest.end();\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tdest.write(Buffer.from(body));\n\t\tdest.end();\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tdest.write(Buffer.from(body.buffer, body.byteOffset, body.byteLength));\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name)) {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders: new Headers(opts.headers)\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url;\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (init.body != null) {\n\t\t\tconst contentType = extractContentType(this);\n\t\t\tif (contentType !== null && !headers.has('Content-Type')) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tif (!headers.has('Connection') && !request.agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent: request.agent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","\"use strict\";\n\nvar realFetch = require('node-fetch');\nmodule.exports = function(url, options) {\n\tif (/^\\/\\//.test(url)) {\n\t\turl = 'https:' + url;\n\t}\n\treturn realFetch.call(this, url, options);\n};\n\nif (!global.fetch) {\n\tglobal.fetch = module.exports;\n\tglobal.Response = realFetch.Response;\n\tglobal.Headers = realFetch.Headers;\n\tglobal.Request = realFetch.Request;\n}\n","/* global AbortController */\nimport 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'\nconst pRetry = require('p-retry');\n\nfunction retryingFetch(retries, url, config, start_time = 0) {\n  return pRetry(\n    (attempt) => {\n      if (config.abortTimeout || config.totalTimeLimit) {\n         return timeoutRetryPromise(url, config, start_time);\n      } else {\n         return fetchAttempt(url, config);\n    }},\n    {\n      onFailedAttempt: config.onFailedAttempt,\n      retries: config.retries,\n      factor: config.factor,\n      minTimeout: config.retryMinDelay,\n      maxTimeout: config.retryMaxDelay\n  })\n}\n\nfunction timeoutRetryPromise(url, config, start_time) {\n  var abortTimer;\n  var controller;\n  return Promise.race([\n    new Promise((resolve, reject) => {\n      controller = new AbortController();\n      config.signal = controller.signal;\n      if (config.totalTimeLimit && performance.now() - start_time > config.totalTimeLimit) {\n        if (abortTimer) { clearTimer(abortTimer) }\n          reject(new pRetry.AbortError(new pRetry.AbortError('Total Time Limit Exceeded')))\n      };\n      resolve();\n    })\n    .then(res => { return fetchAttempt(url, config) }),\n    new Promise((resolve, reject) =>\n      abortTimer = setTimeout(() => {\n        controller.abort();;\n        },\n        config.abortTimeout || config.totalTimeLimit)\n    )\n  ])\n}\n\nfunction fetchAttempt(url, config) {\n  return new Promise((resolve, reject) => {\n    config.fetcher(url, config)\n      .then(res => {\n        if (config.retryStatus.includes(res.status)) {\n            let err = new Error(res.statusText)\n            reject(err)\n        }\n        resolve(res)\n      })\n      .catch(e => reject(e))\n  })\n}\n\nexport default retryingFetch\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (factory());\n}(this, (function () { 'use strict';\n\n  var classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  var createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var get = function get(object, property, receiver) {\n    if (object === null) object = Function.prototype;\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        return get(parent, property, receiver);\n      }\n    } else if (\"value\" in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  };\n\n  var inherits = function (subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  };\n\n  var possibleConstructorReturn = function (self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  };\n\n  var Emitter = function () {\n    function Emitter() {\n      classCallCheck(this, Emitter);\n\n      this.listeners = {};\n    }\n\n    createClass(Emitter, [{\n      key: 'addEventListener',\n      value: function addEventListener(type, callback) {\n        if (!(type in this.listeners)) {\n          this.listeners[type] = [];\n        }\n        this.listeners[type].push(callback);\n      }\n    }, {\n      key: 'removeEventListener',\n      value: function removeEventListener(type, callback) {\n        if (!(type in this.listeners)) {\n          return;\n        }\n        var stack = this.listeners[type];\n        for (var i = 0, l = stack.length; i < l; i++) {\n          if (stack[i] === callback) {\n            stack.splice(i, 1);\n            return;\n          }\n        }\n      }\n    }, {\n      key: 'dispatchEvent',\n      value: function dispatchEvent(event) {\n        var _this = this;\n\n        if (!(event.type in this.listeners)) {\n          return;\n        }\n        var debounce = function debounce(callback) {\n          setTimeout(function () {\n            return callback.call(_this, event);\n          });\n        };\n        var stack = this.listeners[event.type];\n        for (var i = 0, l = stack.length; i < l; i++) {\n          debounce(stack[i]);\n        }\n        return !event.defaultPrevented;\n      }\n    }]);\n    return Emitter;\n  }();\n\n  var AbortSignal = function (_Emitter) {\n    inherits(AbortSignal, _Emitter);\n\n    function AbortSignal() {\n      classCallCheck(this, AbortSignal);\n\n      var _this2 = possibleConstructorReturn(this, (AbortSignal.__proto__ || Object.getPrototypeOf(AbortSignal)).call(this));\n\n      _this2.aborted = false;\n      _this2.onabort = null;\n      return _this2;\n    }\n\n    createClass(AbortSignal, [{\n      key: 'toString',\n      value: function toString() {\n        return '[object AbortSignal]';\n      }\n    }, {\n      key: 'dispatchEvent',\n      value: function dispatchEvent(event) {\n        if (event.type === 'abort') {\n          this.aborted = true;\n          if (typeof this.onabort === 'function') {\n            this.onabort.call(this, event);\n          }\n        }\n\n        get(AbortSignal.prototype.__proto__ || Object.getPrototypeOf(AbortSignal.prototype), 'dispatchEvent', this).call(this, event);\n      }\n    }]);\n    return AbortSignal;\n  }(Emitter);\n\n  var AbortController = function () {\n    function AbortController() {\n      classCallCheck(this, AbortController);\n\n      this.signal = new AbortSignal();\n    }\n\n    createClass(AbortController, [{\n      key: 'abort',\n      value: function abort() {\n        var event = void 0;\n        try {\n          event = new Event('abort');\n        } catch (e) {\n          if (typeof document !== 'undefined') {\n            // For Internet Explorer 11:\n            event = document.createEvent('Event');\n            event.initEvent('abort', false, false);\n          } else {\n            // Fallback where document isn't available:\n            event = {\n              type: 'abort',\n              bubbles: false,\n              cancelable: false\n            };\n          }\n        }\n        this.signal.dispatchEvent(event);\n      }\n    }, {\n      key: 'toString',\n      value: function toString() {\n        return '[object AbortController]';\n      }\n    }]);\n    return AbortController;\n  }();\n\n  if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n    // These are necessary to make sure that we get correct output for:\n    // Object.prototype.toString.call(new AbortController())\n    AbortController.prototype[Symbol.toStringTag] = 'AbortController';\n    AbortSignal.prototype[Symbol.toStringTag] = 'AbortSignal';\n  }\n\n  function hasBrokenNativeAbortController(userAgent) {\n    if (userAgent.match(/ (crios|gsa|fxios)\\//i)) {\n      return true;\n    }\n    if (userAgent.match(/ Safari\\//i) && userAgent.match(/ Version\\/(12.0|12.1|11)/i)) {\n      return true;\n    }\n    return false;\n  }\n\n  function nativeAbortControllerIsBroken(self) {\n    return self.navigator && self.navigator.userAgent && hasBrokenNativeAbortController(self.navigator.userAgent);\n  }\n\n  (function (self) {\n\n    if (self.AbortController && !nativeAbortControllerIsBroken(self)) {\n      return;\n    }\n\n    self.AbortController = AbortController;\n    self.AbortSignal = AbortSignal;\n  })(typeof self !== 'undefined' ? self : global);\n\n})));\n","import backupFetch from 'isomorphic-fetch';\nimport retryingFetch from './retrying-fetch';\n\nlet fetchImpl = false\nif (window && window.fetch && ('signal' in new window.Request(''))) {\n  fetchImpl = window.fetch\n} else {\n  fetchImpl = backupFetch\n}\n\n\nasync function tenaciousFetch(url = '', config = {}) {\n\n  config = Object.assign({\n    factor: 1,\n    retries: 0,\n    retryDelay: undefined,\n    retryMinDelay: 1000,\n    retryMaxDelay: Infinity,\n    retryStatus: [],\n    fetcher: fetchImpl,\n    abortTimeout: undefined,\n    totalTimeLimit: undefined\n  }, config)\n\n  if (!config.fetcher || typeof config.fetcher !== 'function') {\n    throw new Error(\n      'tenacious-fetch: No fetch implementation found. Provide a valid fetch implementation via the fetcher configuration property.'\n    )\n  }\n\n  if (typeof config.onFailedAttempt != 'function') {\n    config.onFailedAttempt = () => {}\n  }\n  if (typeof config.retryStatus === 'string' || typeof config.retryStatus === 'number') {\n    config.retryStatus = [Number.parseInt(config.retryStatus)]\n  }\n  if (config.retryDelay) {\n    config.retryMinDelay = config.retryDelay\n    delete config.retryDelay\n  }\n\n  const start_time = performance.now()\n  return retryingFetch(config.retries, url, config, start_time)\n}\nexport default tenaciousFetch\n"],"names":["BUFFER","Symbol","TYPE","Blob","[object Object]","this","blobParts","arguments","options","buffers","a","length","Number","i","element","buffer","Buffer","ArrayBuffer","isView","from","byteOffset","byteLength","String","push","concat","type","undefined","toLowerCase","test","size","start","end","relativeStart","relativeEnd","Math","max","min","span","slicedBuffer","slice","blob","FetchError","message","systemError","Error","call","code","errno","captureStackTrace","constructor","convert","Object","defineProperties","prototype","enumerable","defineProperty","toStringTag","value","writable","configurable","create","name","require","e","INTERNALS","PassThrough","Stream","Body","body","_this","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBuffer","toString","disturbed","error","on","err","url","consumeBody","_this4","Promise","reject","TypeError","resolve","alloc","accum","accumBytes","abort","resTimeout","setTimeout","chunk","clearTimeout","obj","append","delete","get","getAll","has","set","sort","clone","instance","p1","p2","bodyUsed","getBoundary","pipe","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","then","buf","ct","headers","assign","_this2","JSON","parse","_this3","res","str","charset","exec","pop","convertBody","arrayBuffer","json","text","mixIn","proto","getOwnPropertyNames","desc","getOwnPropertyDescriptor","global","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","find","map","key","MAP","Headers","init","rawHeaders","raw","headerNames","keys","headerName","method","iterator","pairs","pair","Array","join","callback","thisArg","getHeaders","_pairs$i","createHeadersIterator","kind","k","entries","forEach","values","INTERNAL","target","HeadersIteratorPrototype","index","setPrototypeOf","getPrototypeOf","_INTERNAL","done","INTERNALS$1","STATUS_CODES","http","Response","opts","status","statusText","ok","INTERNALS$2","parse_url","Url","format_url","format","streamDestructionSupported","Readable","isRequest","input","Request","parsedURL","href","toUpperCase","inputBody","contentType","extractContentType","signal","isAbortSignal","redirect","follow","compress","counter","agent","getNodeRequestOptions","request","protocol","hostname","contentLengthValue","totalBytes","__proto__","hostHeaderKey","exportNodeCompatibleHeaders","AbortError","PassThrough$1","resolve_url","fetch","send","https","response","destroy","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","addEventListener","once","socket","isArray","val","createHeadersLenient","isRedirect","statusCode","location","locationURL","requestOpts","response_options","statusMessage","codings","zlib","createGunzip","flush","Z_SYNC_FLUSH","finishFlush","createInflate","createInflateRaw","dest","write","writeToStream","module","realFetch","exports","pRetry","classCallCheck","createClass","possibleConstructorReturn","AbortSignal","AbortController","Constructor","props","descriptor","protoProps","staticProps","self","ReferenceError","_Emitter","onabort","subClass","superClass","inherits","event","object","property","receiver","Function","parent","getter","Emitter","listeners","stack","l","splice","debounce","defaultPrevented","Event","document","createEvent","initEvent","bubbles","cancelable","dispatchEvent","navigator","userAgent","match","nativeAbortControllerIsBroken","retryingFetch","retries","config","start_time","attempt","abortTimeout","totalTimeLimit","abortTimer","controller","race","performance","now","clearTimer","fetchAttempt","timeoutRetryPromise","onFailedAttempt","factor","minTimeout","retryMinDelay","maxTimeout","retryMaxDelay","fetcher","retryStatus","includes","let","catch","fetchImpl","window","backupFetch","retryDelay","Infinity","parseInt","const"],"mappings":"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"}