var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};(function(e,r){var n,o,i,a,u;n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},a=function(t){function e(){n(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.aborted=!1,t.onabort=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispatchEvent",this).call(this,t)}}]),e}(function(){function t(){n(this,t),this.listeners={}}return o(t,[{key:"addEventListener",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var r=this.listeners[t],n=0,o=r.length;n<o;n++)if(r[n]===e)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(t){var e=this;if(t.type in this.listeners){for(var r=function(r){setTimeout(function(){return r.call(e,t)})},n=this.listeners[t.type],o=0,i=n.length;o<i;o++)r(n[o]);return!t.defaultPrevented}}}]),t}()),u=function(){function t(){n(this,t),this.signal=new a}return o(t,[{key:"abort",value:function(){var t=void 0;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?(t=document.createEvent("Event")).initEvent("abort",!1,!1):t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}(),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(u.prototype[Symbol.toStringTag]="AbortController",a.prototype[Symbol.toStringTag]="AbortSignal"),function(t){t.AbortController&&!function(t){return t.navigator&&t.navigator.userAgent&&(!!(e=t.navigator.userAgent).match(/ (crios|gsa|fxios)\//i)||!(!e.match(/ Safari\//i)||!e.match(/ Version\/(12.0|12.1|11)/i)));var e}(t)||(t.AbortController=u,t.AbortSignal=a)}("undefined"!=typeof self?self:t)})(e={exports:{}},e.exports);var e,r=require("p-retry");function n(t,e,n,i){return void 0===i&&(i=0),r(function(t){return n.abortTimeout||n.totalTimeLimit?function(t,e,n){var i,a;return Promise.race([new Promise(function(t,o){a=new AbortController,e.signal=a.signal,e.totalTimeLimit&&performance.now()-n>e.totalTimeLimit&&(i&&clearTimer(i),o(new r.AbortError(new r.AbortError("Total Time Limit Exceeded")))),t()}).then(function(r){return o(t,e)}),new Promise(function(t,r){return i=setTimeout(function(){a.abort()},e.abortTimeout||e.totalTimeLimit)})])}(e,n,i):o(e,n)},{onFailedAttempt:n.onFailedAttempt,retries:n.retries,factor:n.factor,minTimeout:n.retryMinDelay,maxTimeout:n.retryMaxDelay})}function o(t,e){return new Promise(function(r,n){e.fetcher(t,e).then(function(t){if(e.retryStatus.includes(t.status)){var o=new Error(t.statusText);n(o)}r(t)}).catch(function(t){return n(t)})})}if(window&&window.fetch&&"signal"in new window.Request(""))window;else if(window)require("whatwg-fetch");else require("node-fetch");export default function(t,e){return void 0===t&&(t=""),void 0===e&&(e={}),new Promise(function(r,o){if(!(e=Object.assign({factor:1,retries:0,retryDelay:void 0,retryMinDelay:1e3,retryMaxDelay:Infinity,retryStatus:[],fetcher:browserFetch,abortTimeout:void 0,totalTimeLimit:void 0},e)).fetcher||"function"!=typeof e.fetcher)return o(new Error("tenacious-fetch: No fetch implementation found. Provide a valid fetch implementation via the fetcher configuration property."));"function"!=typeof e.onFailedAttempt&&(e.onFailedAttempt=function(){}),"string"!=typeof e.retryStatus&&"number"!=typeof e.retryStatus||(e.retryStatus=[Number.parseInt(e.retryStatus)]),e.retryDelay&&(e.retryMinDelay=e.retryDelay,delete e.retryDelay);var i=performance.now();return r(n(0,t,e,i))})};
//# sourceMappingURL=tenacious-fetch.m.js.map
